<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrap R Tools for Debugging and Parametric Programming • wrapr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">wrapr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/CornerCases.html">Corner Cases</a>
    </li>
    <li>
      <a href="articles/DebugFnW.html">Debug Vignette</a>
    </li>
    <li>
      <a href="articles/dot_pipe.html">Dot Pipe</a>
    </li>
    <li>
      <a href="articles/lambda.html">lambda Function Builder</a>
    </li>
    <li>
      <a href="articles/let.html">Let</a>
    </li>
    <li>
      <a href="articles/named_map_builder.html">Named Map Builder</a>
    </li>
    <li>
      <a href="articles/SubstitutionModes.html">Substitution Modes</a>
    </li>
    <li>
      <a href="articles/wrapr_applicable.html">wrapr_applicable</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://www.win-vector.com/">Sponsor: Win-Vector LLC</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><a href="https://winvector.github.io/wrapr/"><code>wrapr</code></a>, is an <a href="https://cran.r-project.org"><code>R</code></a> package that supplies powerful tools for writing and debugging <code>R</code> code.</p>
<div class="figure">
<img src="https://github.com/WinVector/wrapr/raw/master/tools/wraprs.png">
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Primary <code>wrapr</code> services include:</p>
<ul>
<li>
<code><a href="reference/let.html">let()</a></code> (let block)</li>
<li>
<code>%.&gt;%</code> (dot arrow pipe)</li>
<li>
<code>:=</code> (named map builder)</li>
<li>
<code>λ()</code> (anonymous function builder)</li>
<li>
<code><a href="reference/DebugFnW.html">DebugFnW()</a></code> (function debug wrappers)</li>
</ul>
</div>
<div id="let" class="section level2">
<h2 class="hasAnchor">
<a href="#let" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/let.html"><code><a href="reference/let.html">let()</a></code></a>
</h2>
<p><code><a href="reference/let.html">let()</a></code> allows execution of arbitrary code with substituted variable names (note this is subtly different than binding values for names as with <code><a href="http://www.rdocumentation.org/packages/base/topics/substitute">base::substitute()</a></code> or <code><a href="http://www.rdocumentation.org/packages/base/topics/with">base::with()</a></code>).</p>
<p>The function is simple and powerful. It treats strings as variable names and re-writes expressions as if you had used the denoted variables. For example the following block of code is equivalent to having written “<code>a + a</code>”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"wrapr"</span>)

a &lt;-<span class="st"> </span><span class="dv">7</span>

<span class="kw"><a href="reference/let.html">let</a></span>(
  <span class="kw">c</span>(<span class="dt">VAR =</span> <span class="st">'a'</span>),
  
  VAR <span class="op">+</span><span class="st"> </span>VAR
)
 <span class="co">#  [1] 14</span></code></pre></div>
<p>This is useful in re-adapting non-standard evaluation interfaces (NSE interfaces) so one can script or program over them.</p>
<p>We are trying to make <code><a href="reference/let.html">let()</a></code> self teaching and self documenting (to the extent that makes sense). For example try the arguments “<code>eval=FALSE</code>” prevent execution and see what <em>would</em> have been executed, or <code>debug=TRUE</code> to have the replaced code printed in addition to being executed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/let.html">let</a></span>(
  <span class="kw">c</span>(<span class="dt">VAR =</span> <span class="st">'a'</span>),
  <span class="dt">eval =</span> <span class="ot">FALSE</span>,
  {
    VAR <span class="op">+</span><span class="st"> </span>VAR
  }
)
 <span class="co">#  {</span>
 <span class="co">#      a + a</span>
 <span class="co">#  }</span>

<span class="kw"><a href="reference/let.html">let</a></span>(
  <span class="kw">c</span>(<span class="dt">VAR =</span> <span class="st">'a'</span>),
  <span class="dt">debugPrint =</span> <span class="ot">TRUE</span>,
  {
    VAR <span class="op">+</span><span class="st"> </span>VAR
  }
)
 <span class="co">#  $VAR</span>
 <span class="co">#  [1] "a"</span>
 <span class="co">#  </span>
 <span class="co">#  {</span>
 <span class="co">#      a + a</span>
 <span class="co">#  }</span>
 <span class="co">#  [1] 14</span></code></pre></div>
<p>Please see <code>vignette('let', package='wrapr')</code> for more examples. For working with <code>dplyr</code> <code>0.7.*</code> we suggest also taking a look at an alternate approach called <a href="https://github.com/WinVector/seplyr/blob/master/README.md"><code>seplyr</code></a>.</p>
</div>
<div id="dot-arrow-pipe" class="section level2">
<h2 class="hasAnchor">
<a href="#dot-arrow-pipe" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/dot_pipe.html"><code>%.&gt;%</code> (dot arrow pipe)</a>
</h2>
<p><code>%.&gt;%</code> dot arrow pipe is a strict pipe with intended semantics:</p>
<blockquote>
<p>“<code>a %.&gt;% b</code>” is to be treated as if the user had written “<code>{ . &lt;- a; b };</code>” with “<code>%.&gt;%</code>” being treated as left-associative.</p>
</blockquote>
<p>That is: <code>%.&gt;%</code> does not alter any function arguments that are not explicitly named. <code>%.&gt;%</code> is designed to be explicit and simple.</p>
<p>The effect looks is show below.</p>
<p>The following two expressions should be equivalent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cos</span>(<span class="kw">exp</span>(<span class="kw">sin</span>(<span class="dv">4</span>)))
 <span class="co">#  [1] 0.8919465</span>

<span class="dv">4</span> <span class="op">%.&gt;%</span><span class="st"> </span><span class="kw">sin</span>(.) <span class="op">%.&gt;%</span><span class="st"> </span><span class="kw">exp</span>(.) <span class="op">%.&gt;%</span><span class="st"> </span><span class="kw">cos</span>(.)
 <span class="co">#  [1] 0.8919465</span></code></pre></div>
<p>The notation is quite powerful as it treats pipe stages as expression parameterized over the variable “<code>.</code>”. This means you do not need to introduce functions to express stages. The following is a valid dot-pipe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">4</span> <span class="op">%.&gt;%</span><span class="st"> </span>.<span class="op">^</span><span class="dv">2</span> 
 <span class="co">#  [1]  1  4  9 16</span></code></pre></div>
<p>The notation is also very regular in that expressions have the same iterpretation be then surrounded by parenthesis, braces, or as-is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">4</span> <span class="op">%.&gt;%</span><span class="st"> </span>{ .<span class="op">^</span><span class="dv">2</span> } 
 <span class="co">#  [1]  1  4  9 16</span>

<span class="dv">1</span><span class="op">:</span><span class="dv">4</span> <span class="op">%.&gt;%</span><span class="st"> </span>( .<span class="op">^</span><span class="dv">2</span> )
 <span class="co">#  [1]  1  4  9 16</span></code></pre></div>
<p>Regularity can be a <em>big</em> advantage in teaching and comprehension. Please see <a href="http://www.win-vector.com/blog/2017/07/in-praise-of-syntactic-sugar/">“In Praise of Syntactic Sugar”</a> for more details.</p>
</div>
<div id="named-map-builder" class="section level2">
<h2 class="hasAnchor">
<a href="#named-map-builder" class="anchor"></a><a href="https://winvector.github.io/seplyr/articles/named_map_builder.html"><code>:=</code> (named map builder)</a>
</h2>
<p><code>:=</code> is the “named map builder”. It allows code such as the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">'a'</span> <span class="op">:</span><span class="er">=</span><span class="st"> 'x'</span>
 <span class="co">#    a </span>
 <span class="co">#  "x"</span></code></pre></div>
<p>The important property of named map builder is it accepts values on the left-hand side allowing the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name &lt;-<span class="st"> 'variableNameFromElsewhere'</span>
name <span class="op">:</span><span class="er">=</span><span class="st"> 'newBinding'</span>
 <span class="co">#  variableNameFromElsewhere </span>
 <span class="co">#               "newBinding"</span></code></pre></div>
<p>A nice property is <code>:=</code> commutes (in the sense of algebra or category theory) with <code>R</code>’s concatenation function <code>c()</code>. That is the following two statements are equivalent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="st">'a'</span>, <span class="st">'b'</span>) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">c</span>(<span class="st">'x'</span>, <span class="st">'y'</span>)
 <span class="co">#    a   b </span>
 <span class="co">#  "x" "y"</span>

<span class="kw">c</span>(<span class="st">'a'</span> <span class="op">:</span><span class="er">=</span><span class="st"> 'x'</span>, <span class="st">'b'</span> <span class="op">:</span><span class="er">=</span><span class="st"> 'y'</span>)
 <span class="co">#    a   b </span>
 <span class="co">#  "x" "y"</span></code></pre></div>
<p>The named map builder is <a href="https://winvector.github.io/seplyr/articles/named_map_builder.html">used to make <code>seplyr</code> notation much more manageable</a>.</p>
</div>
<div id="-anonymous-function-builder" class="section level2">
<h2 class="hasAnchor">
<a href="#-anonymous-function-builder" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/lambda.html"><code>λ()</code> (anonymous function builder)</a>
</h2>
<p><code>λ()</code> is a concise abstract function creator or “<a href="https://en.wikipedia.org/wiki/Lambda_calculus">lambda abstraction</a>”. It is a placeholder that allows the use of the λ-character for very concise function abstraction.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Make sure lambda function builder is in our enironment.</span>
wrapr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/wrapr/topics/defineLambda">defineLambda</a></span>()

<span class="co"># square numbers 1 through 4</span>
<span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, λ(x, x<span class="op">^</span><span class="dv">2</span>))
 <span class="co">#  [1]  1  4  9 16</span></code></pre></div>
</div>
<div id="debugfnw" class="section level2">
<h2 class="hasAnchor">
<a href="#debugfnw" class="anchor"></a><a href="https://winvector.github.io/wrapr/articles/DebugFnW.html"><code><a href="reference/DebugFnW.html">DebugFnW()</a></code></a>
</h2>
<p><code><a href="reference/DebugFnW.html">DebugFnW()</a></code> wraps a function for debugging. If the function throws an exception the execution context (function arguments, function name, and more) is captured and stored for the user. The function call can then be reconstituted, inspected and even re-run with a step-debugger. Please see our <a href="https://youtu.be/-P9UzQuJSH8?list=PLAKBwakacHbQT51nPHex1on3YNCCmggZA">free debugging video series</a> and <code>vignette('DebugFnW', package='wrapr')</code> for examples.</p>
</div>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<p>Install with either:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"wrapr"</span>)</code></pre></div>
<p>or</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"WinVector/wrapr"</span>)</code></pre></div>
</div>
<div id="note" class="section level2">
<h2 class="hasAnchor">
<a href="#note" class="anchor"></a>Note</h2>
<p>Note: <code>wrapr</code> is meant only for “tame names”, that is: variables and column names that are also valid <em>simple</em> (without quotes) <code>R</code> variables names.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=wrapr">https://​cran.r-project.org/​package=wrapr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/WinVector/wrapr">https://​github.com/​WinVector/​wrapr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/WinVector/wrapr/issues">https://​github.com/​WinVector/​wrapr/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John Mount <br><small class="roles"> Author, maintainer </small> </li>
<li>Nina Zumel <br><small class="roles"> Author </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Mount, Nina Zumel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
